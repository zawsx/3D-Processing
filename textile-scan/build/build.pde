// Textile Scans Â© 02/18/2014, Douglas Dollars

// Scanning cloth, tracing its pattern/shape, and using that as a focus for color placement.

HDrawablePool pool;
HColorPool colors;

void setup(){
  size(600,600);
  H.init(this).background(#330000);
  smooth();

  // colors from poppies textile
  // colors = new HColorPool(#FFFFFF,#9A332A,#AE4940,#A94B42,#BA3629,#B4483D,#AA483E,#B65045,#C54132,#C34031,#A9493E,#C95042,#B94638,#B13F31,#B72E1D,#B94232,#BF5041,#B14334,#AA4638,#B74737,#BB675B,#BF5040,#C74D3B,#BE4E3D,#BC4B39,#B54432,#B13B28,#CA5744,#BA4E3C,#C34C38,#BA4A37,#A94B3B,#AF5242,#C5614F,#B86A5A,#C2533C,#BE6C5B,#865B52,#944F40,#A6503D,#9C4B35,#996353,#8F7262);
  
  // colors from a Russian Orthodox blanket
  colors = new HColorPool(#C73946,#FB182C,#F23741,#EB151F,#981C20,#CF3338,#C6181D,#954A4B,#E32424,#CB332F,#A14C49,#E8453F,#F13D34,#F55045,#F14438,#F15144,#BC443A,#E74B3E,#E27066,#DF6F65,#F74737,#A44237,#87443C,#B12B1B,#EC6B5A,#BB3B2A,#D7513F,#FA6E5A,#F75139,#D7442E,#984234,#D9513A,#CC5E4B,#F45E44,#E6654E,#CA523C,#816F6B,#E34A27,#F96E4D,#AA503A,#C84221,#9C5746,#F65C35,#F27454,#E66543,#D7451E,#DE6C4B,#D14F29,#EB572B,#E97D5C,#F06438,#F36B40,#B75232,#EA7D59,#C03F14,#C1532E,#F1450B,#EB693D,#AA5E44,#F35C27,#856C63,#BC5028,#C76741,#BE552A,#F58D61,#B87252,#8A7267,#EC8657,#F56421,#F8641E,#DC5818,#915030,#F18651,#FA6921,#E6956C,#B25220,#B86438,#DA743E,#AC5F36,#F97E3C,#F9681A,#875133,#EF7630,#CC6A31,#7C533B,#9E572C,#A58B7B,#FC741F,#BC8B6C,#F67D30,#FB8D47,#EC9862,#F4A26D,#A9673C,#9D623B,#D79061,#AF8467,#947966,#D17A3C,#AB7955,#FCAC72,#9F7759,#A06F4A,#F19145,#AE7C54,#A07755,#DF9557,#8F6E52,#B98350,#BD9976,#825C37,#9F764E,#AF8358,#BD8A58,#9D632A,#AF7338,#AE8256,#86623C,#A58767,#96744F,#C29059,#BEA283,#CF9B61,#8D6B45,#916F49,#A98863,#D3934B,#A1794C,#957653,#D29856,#F0AE62,#8B7153,#AE814D,#916B3F,#D29B5B,#BA966C,#A17848,#8C6940,#9C876E,#CB9C64,#BA9364,#9F7849,#9B7445,#AC814D,#F5B15E,#E2A65C,#CD9652,#AD7D41,#B48851,#CC9147,#9C7D56,#B59771,#D4AF80,#826137,#D89A4B,#C9A372,#D19C57,#8B6B41,#80643F,#806541,#957A56,#B6894D,#BB9460,#A88351,#927349,#755F41,#E4A651,#98784C,#957344,#B18D5B,#C0975E,#A78658,#D6AA6C,#947344,#A68F6E,#BD9B6A,#BB9865,#81663E,#AB8245,#8A6E44,#9E968A,#F8C16E,#8A6B3C,#E5B771,#95846A,#A58B63,#928571,#C59F64,#A37F47,#8A6F45,#9E8660,#9B7943,#8A6F44,#9F7F4C,#D9C29D,#876D43,#AA9778,#DEB46F,#EEBC68,#D4B176,#AA9D87,#8F7343,#EFC274,#A3844E,#9C8356,#BDAB8A,#917A4F,#9F834E,#846F47,#B8AC95,#9F8553,#887A5F,#DABB7E,#A99D85,#CBBDA1,#D2BB8C,#D4B87D,#E4C788,#E4C98B,#AAA490,#D0CAB3,#7F8C96,#8C958C,#91969A,#828589,#858388);


  pool = new HDrawablePool(1);
  pool.autoAddToStage()
    .add(new HShape("frill.svg"))

    .onCreate(
      new HCallback() {
        public void run(Object obj) {
          HShape d = (HShape) obj;
          d
            .enableStyle(false) // Kill any Illustrator styling
            .strokeJoin(ROUND)
            .strokeCap(ROUND)
            .noStroke()
            // .strokeWeight(1)
            // .stroke(#333333)

            .loc(width/2, height/2)
            .anchorAt(H.CENTER)

            //.rotate( x ) // Disabling rotation as the SVG file is oriented as I prefer
            .size( 450 ) // initial sizing
          ;
          d.randomColors(colors.fillOnly()); //.fillOnly();, .strokeOnly();, or .fillAndStroke(); are options
        }
      }
    )
    .requestAll()
  ;

  H.drawStage();
}